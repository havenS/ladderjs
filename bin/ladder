#!/usr/bin/env node
require('dotenv').config()
const yargs = require('yargs')

yargs
    .command(
        'extract',
        'extract the folders for the controllers, the models and/or the views. The files are then copied to let you cutomize the LadderJS behaviours.',
        args => {
            args.option('framework', {
                describe: 'CSS framework to use, possible values are "bootstrap3", "bootstrap4", "materialize" (which is the default)',
                default: 'materialize'
            })
            args.option('subfolder', {
                describe: 'Subfolder in which copy file tree (omit slashs) (exemple: "front" or "../front" not "/front"',
            })
        },
        argv => {
            require('./files/init')(argv.verbose, argv.framework)
        }
    )
    .command(
        'db:install',
        'Populate the database with a simple user table letting you use the authentication system',
        args => {
            args.option('dburl', {
                describe: 'The url string of the db connection like "postgres://me@localhost:5432/mydatabase". If none is passed, the "DATABASE_URL" value set in your ".env" file will be used',
            })
        },
        argv => {
            require('./db/install')(argv.verbose, argv.dburl)
        }
    )
    .option('verbose', {
        alias: 'v',
        default: false
    })
    .help()
    .argv

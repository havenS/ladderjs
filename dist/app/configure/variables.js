"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(app,config){config.routes=config.routes.map(function(route){var view=route.view?route.view.replace(/\//g,"_"):"";var type=route.controller?route.controller.split("/")[0]:view;var action=route.action?"_"+route.action:"";var key=(route.method+"_"+type+action).toLocaleLowerCase();route.key=route.key||key;return route});var apiPrefix=config.apiPrefix,controllersPath=config.controllersPath,modelsPath=config.modelsPath;app.ladderjs={apiPrefix:apiPrefix,config:config};app.generateUrl=function(route){if(route[0]&&route[0]==="/"){return route}var routeObj=null;if(typeof route==="string"){routeObj=config.routes.find(function(_ref){var key=_ref.key;return key===route});if(!routeObj){app.logger.error("No route found for key "+route);return route}}else{routeObj=route}var prefix=routeObj.prefix?"/"+routeObj.prefix:"";var url=""+prefix+routeObj.url;return url};app.controllersPath=controllersPath;app.modelsPath=modelsPath};